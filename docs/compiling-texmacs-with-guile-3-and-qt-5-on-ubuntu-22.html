<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:x="https://www.texmacs.org/2002/extensions" xmlns:m="http://www.w3.org/1998/Math/MathML">
  <head>
    <title>TeXmacs notes</title>
    <meta content="TeXmacs 2.1.1" name="generator"></meta>
    <link href="../resources/notes-base.css" type="text/css" rel="stylesheet"></link>
    <link href="../resources/blog-icon.png" rel="icon"></link>
    <script src="../resources/highlight.pack.js" language="javascript" defer></script>
    <script src="../resources/notes-base.js" language="javascript" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" language="javascript"></script>
  </head>
  <body>
    <div class="toggle" style="display: none">
      <p>
        
      </p>
    </div>
    <div class="notes-header">
      <p>
        <img class="image" src="../resources/texmacs-blog-transparent.png" width="28.116784"></img><span style="margin-left: 2pt"></span><a href="./main.html">[main]</a><em
        class="notes-header-name">Notes on TeXmacs</em>
      </p>
    </div>
    <h1 id="auto-1">Compiling TeXmacs on Ubuntu 22 with Guile3 and Qt5 <span style="margin-left: 1em"></span></h1>
    <div class="notes-abstract">
      This guide describes how to compile TeXmacs on Ubuntu 22 with Guile 3
      support and Qt 5.
    </div>
    <p>
      
    </p>
    <p>
      Guile 1.8.8 is no longer supported on modern distributions. Let us build
      mgubi's Guile3 scheme TeXmacs fork.
    </p>
    <h2 id="auto-2">1.<span style="margin-left: 1em"></span>Dependencies<span style="margin-left: 1em"></span></h2>
    <p>
      Install Guile 3.
    </p>
    <pre class="verbatim" xml:space="preserve">
sudo apt install guile3 guile3-dev</pre>
    <p>
      Download the Qt online installer from <a href="https://www.qt.io/download-qt-installer">here</a>.
    </p>
    <p>
      Make the installer executable with the command
    </p>
    <pre class="verbatim" xml:space="preserve">
chmod +x &lt;path-to-installer.run&gt;</pre>
    <p>
      Run the installer. You will have to create a Qt account to proceed. When
      you arrive at the components page. Select these packages:
    </p>
    <p>
      <img class="image" src="compiling-texmacs-with-guile-3-and-qt-5-on-ubuntu-22-1.png" width="70%"></img>
    </p>
    <p>
      Agree to the license and wait for the download to finish (It was around
      9Gb for me).
    </p>
    <p>
      <img class="image" src="compiling-texmacs-with-guile-3-and-qt-5-on-ubuntu-22-2.png" width="70%"></img>
    </p>
    <p>
      Add the Qt binaries to your path. For me the installer installed the Qt
      directory in my home directory so I had to add the path <tt class="verbatim">~/Qt/5.15.2/gcc_64/bin/</tt>
      with the command:
    </p>
    <pre class="verbatim" xml:space="preserve">
export PATH=~/Qt/5.15.2/gcc_64/bin/:$PATH</pre>
    <p>
      If you want to add the Qt binaries to your path permanently, then place
      the command above into your <tt class="verbatim">~/.bashrc</tt> file, so that it
      is executed each time you run the terminal.
    </p>
    <p>
      Now the <tt class="verbatim">qmake</tt> command should work and output something
      like this:
    </p>
    <p>
      <img class="image" src="compiling-texmacs-with-guile-3-and-qt-5-on-ubuntu-22-3.png" width="70%"></img>
    </p>
    <h2 id="auto-3">2.<span style="margin-left: 1em"></span>Compiling<span style="margin-left: 1em"></span></h2>
    <p>
      Navigate to the directory where you want TeXmacs' sources to be placed
      in.
    </p>
    <p>
      Clone mgubi's repo and navigate into it.
    </p>
    <pre class="verbatim" xml:space="preserve">
git clone https://github.com/mgubi/texmacs.git texmacs-guile3  </pre>
    <pre class="verbatim" xml:space="preserve">
cd  texmacs-guile3</pre>
    <p>
      Checkout the Guile 3 branch.
    </p>
    <pre class="verbatim" xml:space="preserve">
git checkout guile3</pre>
    <p>
      Go into the src directory.
    </p>
    <pre class="verbatim" xml:space="preserve">
cd src</pre>
    <p>
      Run the configure command (the first dashes are double dashes &ndash; it
      is just weird HTML rendering
      &lt;dash&gt;&lt;dash&gt;with&lt;dash&gt;guile2 etc.).
    </p>
    <p>
      .<tt class="verbatim">/configure &ndash;with-guile2 &ndash;enable-guile2</tt>
    </p>
    <p>
      Compile TeXmacs.
    </p>
    <pre class="verbatim" xml:space="preserve">
make -j4</pre>
    <p>
      It took me around 2 minutes to compile the sources with -j12. I guess
      the scaling is nonlinear so with -j4 it should take no more than 6
      minutes or so (just a guess).
    </p>
    <p>
      The texmacs binary is placed in <tt class="verbatim">&lt;repodirectory&gt;/src/TeXmacs/bin/texmacs</tt>
    </p>
    <p>
      
    </p>
  </body>
</html>